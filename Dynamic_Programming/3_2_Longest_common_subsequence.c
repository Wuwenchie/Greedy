/*
問題敘述：

在 MyGO!!!!! 的世界裡，素世對一首名為「春日影」的旋律懷有深刻情感，每當這首旋律響起，往昔的悲傷回憶便湧上心頭。
然而，他的好友愛音卻總愛捉弄素世。在一次現場演出中，愛音手持吉他登台，演奏了一段音樂。
這段旋律聽起來有些熟悉，卻又無法說得清楚其中的內涵。
原來，為了不讓素世發現，她在演奏過程中故意添加或省略了一些音符，令原本熟悉的旋律變得難以辨識。

素世懷疑愛音演奏的那段旋律是從「春日影」改編而來，於是她分別提供了錄下的愛音演奏片段和「春日影」的旋律片段
（皆以數字序列表示，每個數字代表一個音符的音高）。現在，請你幫忙檢查：
是否能夠從兩個旋律中，各自選取部分相等數量的音符（保留原有順序不變），使得兩邊得到的序列完全相同？在所有可能的選取方式中，假設存在一種方法能讓選出的相同音符數量達到最多，且這個數量嚴格超過「春日影」旋律片段長度的一半，那麼就可以判定愛音偷偷演奏了「春日影」。

Ex: 
愛音的演奏片段: 〈3, 1, 2, 2, 3, 3, 4, 1〉
「春日影」片段: 〈3, 2, 1, 2, 3, 4, 3, 2〉

可以找到其中一種有最多音符的序列為〈3, 1, 2, 3, 4〉，長度為 5 ≥ ⌊(8/2)⌋ = 4
那麼你就幫助素世抓到了愛音偷偷演奏了「春日影」。

  輸入說明：
    輸入包含三行
    第一行包含兩個正整數 N 與 M ，分別代表愛音現場演奏片段和「春日影」旋律片段與的音符數量。
    第二行包含 n 個整數，依序表示愛音演奏片段中的各個音符音高。
    第三行包含 m 個整數，依序表示「春日影」旋律中的各個音符音高。
  （每個整數代表一個音高）

    1 ≤ N, M ≤ 2000
    1 ≤ 音高範圍 ≤ 100
    
  輸出說明：
    輸出有最多音符的序列的長度，以及 "Yes" 或 "No" 表示有沒有抓到。
    長度與 Yes/No 之間有一個空白，最後需要加上換行符號 \n。

*/



#include <stdio.h>

#define MAX 2001

int max(int a, int b) {
    return a > b ? a : b;
}

int dp[MAX][MAX];  // LCS 表格

int main() {
    int N, M;
    int A[MAX], B[MAX];

    // 讀入長度
    scanf("%d %d", &N, &M);

    // 讀入愛音的旋律
    for (int i = 1; i <= N; i++) {
        scanf("%d", &A[i]);
    }

    // 讀入春日影的旋律
    for (int j = 1; j <= M; j++) {
        scanf("%d", &B[j]);
    }

    // // 初始化 DP 表
    // for (int i = 0; i <= N; i++) {
    //     for (int j = 0; j <= M; j++) {
    //         dp[i][j] = 0;
    //     }
    // }

    // LCS 計算
    for (int i = 1; i <= N; i++) {
        for (int j = 1; j <= M; j++) {
            if (A[i] == B[j]) {
                dp[i][j] = dp[i - 1][j - 1] + 1;
            } else {
                dp[i][j] = max(dp[i - 1][j], dp[i][j - 1]);
            }
        }
    }

    int lcs_length = dp[N][M];
    int threshold = M / 2;

    if (lcs_length > threshold) {
        printf("%d Yes\n", lcs_length);
    } else {
        printf("%d No\n", lcs_length);
    }

    return 0;
}
